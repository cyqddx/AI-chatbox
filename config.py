import os
from pathlib import Path
from dotenv import load_dotenv

# åŠ è½½ç¯å¢ƒå˜é‡æ–‡ä»¶ (.env)
load_dotenv()


class Config:
    """
    é¡¹ç›®é…ç½®ç±»ï¼Œé›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®å‚æ•°
    è®¾è®¡åŸåˆ™ï¼š
    1. æ‰€æœ‰é…ç½®å‚æ•°é›†ä¸­ç®¡ç†ï¼Œé¿å…æ•£è½åœ¨ä»£ç å„å¤„
    2. ç¯å¢ƒå˜é‡å’Œæ•æ„Ÿä¿¡æ¯é€šè¿‡.envæ–‡ä»¶ç®¡ç†
    3. è‡ªåŠ¨åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
    4. æä¾›é»˜è®¤å€¼ç¡®ä¿ç¨‹åºå¯è¿è¡Œ
    """

    def __init__(self):
        # ----------------------- åŸºç¡€è·¯å¾„é…ç½® -----------------------
        # é¡¹ç›®æ ¹ç›®å½•
        self.BASE_DIR = Path(__file__).resolve().parent

        # æ—¥å¿—ç›®å½• - å­˜æ”¾æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
        self.LOG_DIR = self.BASE_DIR / "log"

        # æ•°æ®ç›®å½• - å­˜æ”¾ä¸Šä¼ æ–‡ä»¶å’Œå‘é‡å­˜å‚¨
        self.DATA_DIR = self.BASE_DIR / "data"
        self.UPLOADS_DIR = self.DATA_DIR / "uploads"  # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
        self.VECTOR_STORE_DIR = self.DATA_DIR / "vector_store"  # å‘é‡æ•°æ®åº“

        # æ•°æ®åº“ç›®å½• - å­˜æ”¾SQLiteæ•°æ®åº“æ–‡ä»¶
        self.DB_DIR = self.BASE_DIR / "db"

        # é™æ€èµ„æºç›®å½• - å­˜æ”¾CSSç­‰é™æ€æ–‡ä»¶
        self.STATIC_DIR = self.BASE_DIR / "static"

        # åˆ›å»ºæ‰€æœ‰å¿…è¦ç›®å½•
        self._create_directories()

        # åˆ›å»ºå…¨å±€å›½é™…åŒ–å®ä¾‹ï¼ˆé»˜è®¤ä¸­æ–‡ï¼‰
        self.i18n = I18nConfig('zh')

        # ----------------------- æ•°æ®åº“é…ç½® -----------------------
        # ç”¨æˆ·æ•°æ®åº“æ–‡ä»¶è·¯å¾„
        self.DB_PATH = self.DB_DIR / "users.db"

        # ----------------------- æ¨¡å‹é…ç½® -----------------------
        # ä»ç¯å¢ƒå˜é‡è·å–APIå¯†é’¥å’ŒåŸºç¡€URL
        self.MODEL_API_KEY = os.getenv("TONGYIQIANWEN_API_KEY")
        self.MODEL_BASE_URL = os.getenv("TONGYIQIANWEN_BASE_URL")

        # ä½¿ç”¨é€šä¹‰åƒé—®qwen-plusæ¨¡å‹
        self.MODEL_NAME = "qwen-plus"

        # ----------------------- æ–‡ä»¶å¤„ç†é…ç½® -----------------------
        # æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
        self.SUPPORTED_FILE_FORMATS = ["pdf", "docx", "txt", "pptx", "html", "ipynb"]

        # æ–‡æœ¬åˆ†å—å‚æ•°
        self.CHUNK_SIZE = 1000  # æ¯ä¸ªæ–‡æœ¬å—çš„æœ€å¤§å­—ç¬¦æ•°
        self.CHUNK_OVERLAP = 200  # å—ä¹‹é—´çš„é‡å å­—ç¬¦æ•°

        # ----------------------- æ—¥å¿—é…ç½® -----------------------
        # ä¸»æ—¥å¿—æ–‡ä»¶è·¯å¾„
        self.LOG_FILE = self.LOG_DIR / "app.log"

        # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR, CRITICAL
        self.LOG_LEVEL = "INFO"

        # ----------------------- ç½‘ç»œæœç´¢é…ç½® -----------------------
        # SerpAPIå¯†é’¥ (ç”¨äºç½‘ç»œæœç´¢åŠŸèƒ½)
        self.SERPAPI_API_KEY = os.getenv("SERPAPI_API_KEY")

        # ----------------------- æ„å›¾è¯†åˆ«é…ç½® -----------------------
        # æ„å›¾è¯†åˆ«æç¤ºæ¨¡æ¿
        self.INTENT_PROMPT = """
                                    # è§’è‰²
                                    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ™ºèƒ½æ„å›¾åˆ†ç±»å™¨ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œ**ç²¾ç¡®**çš„æ„å›¾åˆ†ç±»ã€‚

                                    # åˆ†ç±»ä½“ç³»ä¸å®šä¹‰
                                    è¯·ä¸¥æ ¼æ ¹æ®ä»¥ä¸‹å®šä¹‰ï¼Œå°†ç”¨æˆ·è¾“å…¥åˆ†ç±»åˆ°**å”¯ä¸€ä¸€ä¸ª**æœ€åˆé€‚çš„ç±»åˆ«ï¼ˆä»…è¾“å‡ºå¯¹åº”çš„å¤§å†™å­—æ¯ä»£ç ï¼‰ï¼š

                                    *   **A. è¯¾ç¨‹ç›¸å…³é—®é¢˜ï¼š** é—®é¢˜**æ˜ç¡®æŒ‡å‘**ç‰¹å®šè¯¾ç¨‹ï¼ˆå¦‚è¯¾ç¨‹åã€è¯¾ç¨‹å·ã€æ•™å¸ˆåï¼‰ã€è¯¾ç¨‹å†…çš„å…·ä½“å†…å®¹ï¼ˆç« èŠ‚ã€çŸ¥è¯†ç‚¹ï¼‰ã€ä½œä¸šï¼ˆä½œä¸šè¦æ±‚ã€æäº¤æ–¹å¼ã€æˆªæ­¢æ—¥æœŸï¼‰ã€è€ƒè¯•ï¼ˆæ—¶é—´ã€èŒƒå›´ã€é¢˜å‹ã€æˆç»©ï¼‰ã€å®éªŒã€é¡¹ç›®ç­‰ã€‚*(æ ¸å¿ƒï¼šä¸ç‰¹å®šè¯¾ç¨‹ç›´æ¥ç»‘å®š)*
                                        *   ä¾‹ï¼š"CS101 çš„ä½œä¸šä¸‰ä»€ä¹ˆæ—¶å€™äº¤ï¼Ÿ", "å¼ æ•™æˆçš„é«˜æ•°è¯¾ç¬¬ä¸‰ç« é‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ", "æœºå™¨å­¦ä¹ æœŸæœ«è€ƒè¯•è€ƒä¸è€ƒè´å¶æ–¯ç½‘ç»œï¼Ÿ"
                                    *   **B. ä¸“ä¸šé¢†åŸŸé—®é¢˜ï¼š** é—®é¢˜æ¶‰åŠç‰¹å®šå­¦ç§‘æˆ–é¢†åŸŸçš„**æ ¸å¿ƒçŸ¥è¯†ã€ç†è®ºã€æ¦‚å¿µã€åŸç†ã€æŠ€æœ¯**çš„è§£é‡Šã€æ¢è®¨æˆ–åº”ç”¨ï¼Œ**ä¸å±€é™äºç‰¹å®šè¯¾ç¨‹**ã€‚é—®é¢˜é€šå¸¸æ˜¯å¼€æ”¾æ€§çš„çŸ¥è¯†æ€§æ¢è®¨ã€‚*(æ ¸å¿ƒï¼šä¸“ä¸šçŸ¥è¯†çš„æ·±åº¦è§£é‡Š/æ¢è®¨)*
                                        *   ä¾‹ï¼š"è¯·è§£é‡Šä¸€ä¸‹é‡å­çº ç¼ çš„åŸºæœ¬åŸç†ã€‚", "Transformer æ¨¡å‹ç›¸æ¯” RNN çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ", "å¦‚ä½•ç†è§£å®è§‚ç»æµä¸­çš„è²åˆ©æ™®æ–¯æ›²çº¿ï¼Ÿ"
                                    *   **C. æ—¥å¸¸äº¤æµï¼š** ç®€å•çš„é—®å€™ã€å¯’æš„ã€æ„Ÿè°¢ã€é“æ­‰ã€é—²èŠç­‰ï¼Œ**ä¸æ¶‰åŠä»»ä½•ä¸“ä¸šæˆ–è¯¾ç¨‹å†…å®¹**ã€‚*(æ ¸å¿ƒï¼šéä¸“ä¸šç¤¾äº¤)*
                                        *   ä¾‹ï¼š"ä½ å¥½ï¼", "æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ", "è°¢è°¢ä½ çš„å¸®åŠ©ï¼", "ä»Šå¤©å¤©æ°”çœŸä¸é”™ã€‚"
                                    *   **D. æ— æ³•è¯†åˆ«ï¼š** è¾“å…¥**å®Œå…¨æ— æ³•ç†è§£**ï¼ˆå¦‚ä¹±ç ã€æ— æ„ä¹‰å­—ç¬¦ï¼‰ï¼Œæˆ–**æ˜æ˜¾ä¸å±äº** A-K ä¸­ä»»ä½•ç±»åˆ«ã€‚*(å…œåº•ç±»åˆ«ï¼Œè°¨æ…ä½¿ç”¨)*
                                    *   **E. å®šä¹‰ä¸è§£é‡Šï¼š** **ç›´æ¥è¯·æ±‚**æŸä¸ª**æœ¯è¯­ã€æ¦‚å¿µã€ç¼©å†™**çš„å«ä¹‰ã€å®šä¹‰æˆ–ç®€çŸ­è§£é‡Šã€‚å›ç­”é€šå¸¸æ˜¯æ ‡å‡†åŒ–çš„ã€‚*(æ ¸å¿ƒï¼šæœ¯è¯­/æ¦‚å¿µçš„å®šä¹‰)*
                                        *   ä¾‹ï¼š"ä»€ä¹ˆæ˜¯å·ç§¯ç¥ç»ç½‘ç»œï¼Ÿ", "'GDP' æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ", "è¯·è§£é‡Šä¸€ä¸‹'å…‰åˆä½œç”¨'ã€‚"
                                    *   **F. æ–¹æ³•ä¸æ­¥éª¤ï¼š** è¯·æ±‚æä¾›å®Œæˆ**æŸä¸ªå…·ä½“ä»»åŠ¡ã€æ“ä½œæˆ–æµç¨‹**çš„**æ­¥éª¤ã€æ–¹æ³•ã€æ“ä½œæŒ‡å—**ã€‚å…³æ³¨çš„æ˜¯"æ€ä¹ˆåš"ã€‚*(æ ¸å¿ƒï¼šæ“ä½œæ­¥éª¤/æŒ‡å—)*
                                        *   ä¾‹ï¼š"å¦‚ä½•åœ¨ Python ä¸­å®‰è£… Pandas åº“ï¼Ÿ", "æ¯•ä¸šè®ºæ–‡çš„æŸ¥é‡æ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ", "æ€ä¹ˆç”³è¯·å‡ºå›½äº¤æ¢ï¼Ÿ"
                                    *   **G. æ¯”è¾ƒä¸é€‰æ‹©ï¼š** è¯·æ±‚**æ¯”è¾ƒ**ä¸¤ä¸ªæˆ–å¤šä¸ª**é€‰é¡¹ã€æ–¹æ¡ˆã€å·¥å…·ã€æ–¹æ³•**çš„ä¼˜ç¼ºç‚¹ï¼Œæˆ–è¯·æ±‚åŸºäºç‰¹å®šæ¡ä»¶**æ¨èé€‰æ‹©**ã€‚*(æ ¸å¿ƒï¼šæ¯”è¾ƒä¼˜åŠ£æˆ–åšé€‰æ‹©)*
                                        *   ä¾‹ï¼š"PyTorch å’Œ TensorFlow å“ªä¸ªæ›´é€‚åˆæ·±åº¦å­¦ä¹ å…¥é—¨ï¼Ÿ", "ä¹° MacBook Air è¿˜æ˜¯ Pro æ›´é€‚åˆç¼–ç¨‹ï¼Ÿ", "è€ƒç ”å’Œå°±ä¸šè¯¥æ€ä¹ˆé€‰ï¼Ÿ"
                                    *   **H. è¯„ä¼°ä¸å»ºè®®ï¼š** è¯·æ±‚å¯¹**å·²æœ‰çš„æ–¹æ¡ˆã€è®¡åˆ’ã€ä½œå“ã€æƒ³æ³•**è¿›è¡Œ**è¯„ä»·ã€åˆ¤æ–­å¯è¡Œæ€§ã€åˆ†æä¼˜ç¼ºç‚¹**ï¼Œæˆ–è¯·æ±‚æä¾›**æ”¹è¿›å»ºè®®ã€ä¼˜åŒ–ç­–ç•¥ã€å†³ç­–æ”¯æŒ**ã€‚*(æ ¸å¿ƒï¼šè¯„ä»·ä¼˜åŠ£æˆ–æä¾›å»ºè®®)*
                                        *   ä¾‹ï¼š"ä½ çœ‹æˆ‘è¿™ä¸ªå®éªŒè®¾è®¡æ–¹æ¡ˆå¯è¡Œå—ï¼Ÿ", "èƒ½ç»™æˆ‘çš„è®ºæ–‡æ‘˜è¦æäº›ä¿®æ”¹å»ºè®®å—ï¼Ÿ", "æˆ‘è¯¥æ€æ ·æé«˜æˆ‘çš„è‹±è¯­å¬åŠ›ï¼Ÿ"
                                    *   **J. å…¶ä»–é—®é¢˜ï¼š** å±äº**ä¸“ä¸šæˆ–å­¦æœ¯èŒƒç•´**ï¼ˆéæ—¥å¸¸é—²èŠï¼‰ï¼Œä½†**æ— æ³•å½’ç±»**åˆ° B, E, F, G, H ä¸­çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼šè¯¢é—®ç ”ç©¶é¢†åŸŸåŠ¨æ€ã€å­¦æœ¯èµ„æºæŸ¥æ‰¾æ–¹æ³•ï¼ˆéå…·ä½“æ“ä½œæ­¥éª¤ï¼‰ã€å¯¹æŸä¸ªå¤æ‚ç°è±¡çš„çœ‹æ³•ï¼ˆéå•çº¯å®šä¹‰è§£é‡Šï¼‰ç­‰ã€‚*(ä¸“ä¸šé—®é¢˜çš„å…œåº•)*
                                        *   ä¾‹ï¼š"äººå·¥æ™ºèƒ½é¢†åŸŸæœ€è¿‘æœ‰ä»€ä¹ˆçªç ´æ€§è¿›å±•ï¼Ÿ", "åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°æœ€æ–°çš„è®¡ç®—æœºé¡¶ä¼šè®ºæ–‡ï¼Ÿ", "ä½ æ€ä¹ˆçœ‹å¾…åŒºå—é“¾æŠ€æœ¯çš„æœªæ¥å‘å±•ï¼Ÿ"
                                    *   **K. æ–‡ä»¶ç›¸å…³é—®é¢˜ï¼š** é—®é¢˜**æ˜ç¡®å›´ç»•**ç”¨æˆ·**ä¸Šä¼ çš„æ–‡ä»¶**æˆ–å³å°†ä¸Šä¼ çš„æ–‡ä»¶ã€‚åŒ…æ‹¬æ–‡ä»¶å†…å®¹çš„ç†è§£ã€æ ¼å¼è¦æ±‚ã€å¤„ç†ã€åˆ†æã€ä¿®æ”¹ç­‰ã€‚*(æ ¸å¿ƒï¼šä¸ä¸Šä¼ æ–‡ä»¶ç›´æ¥ç›¸å…³)*
                                        *   ä¾‹ï¼š"æˆ‘åˆšä¸Šä¼ çš„PDFé‡Œè®²äº†ä»€ä¹ˆï¼Ÿ", "è¿™ä»½æŠ¥å‘Šæœ‰ä»€ä¹ˆéœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼Ÿ", "ç³»ç»Ÿæ”¯æŒä¸Šä¼ ä»€ä¹ˆæ ¼å¼çš„å›¾ç‰‡ï¼Ÿ"

                                    # å…³é”®åŒºåˆ†ä¸ä¼˜å…ˆçº§è§„åˆ™
                                    *   **B (ä¸“ä¸šé¢†åŸŸ) vs E (å®šä¹‰è§£é‡Š):**
                                        *   å¦‚æœé—®é¢˜**æ ¸å¿ƒæ˜¯è¯·æ±‚ä¸€ä¸ªæœ¯è¯­/æ¦‚å¿µçš„æ ‡å‡†å®šä¹‰æˆ–ç®€çŸ­è§£é‡Š**ï¼Œå½’ä¸º **E**ã€‚
                                        *   å¦‚æœé—®é¢˜**è¶…è¶Šç®€å•å®šä¹‰ï¼Œæ¶‰åŠåŸç†ã€æœºåˆ¶ã€æ¯”è¾ƒã€åº”ç”¨ã€æ·±åº¦æ¢è®¨æˆ–åˆ†æ**ï¼Œå½’ä¸º **B**ã€‚
                                    *   **E (å®šä¹‰è§£é‡Š) vs J (å…¶ä»–é—®é¢˜):**
                                        *   æ¸…æ™°è¯·æ±‚**å•ä¸ªæœ¯è¯­/æ¦‚å¿µ**çš„å®šä¹‰ -> **E**ã€‚
                                        *   è¯·æ±‚è§£é‡Šä¸€ä¸ª**å¤æ‚ç°è±¡ã€è¿‡ç¨‹ã€æˆ–æ¶‰åŠå¤šä¸ªæ¦‚å¿µçš„å…³ç³»** -> **J** (æˆ– B, å¦‚æœæ·±åº¦è¶³å¤Ÿ)ã€‚
                                    *   **F (æ–¹æ³•æ­¥éª¤) vs G (æ¯”è¾ƒé€‰æ‹©) vs H (è¯„ä¼°å»ºè®®):**
                                        *   **"æ€ä¹ˆåšï¼Ÿ" (æ­¥éª¤)** -> **F**ã€‚
                                        *   **"é€‰å“ªä¸ªï¼Ÿ/Aå’ŒBå“ªä¸ªå¥½ï¼Ÿ" (æ¯”è¾ƒ/é€‰æ‹©)** -> **G**ã€‚
                                    *   **H (è¯„ä¼°å»ºè®®) vs J (å…¶ä»–é—®é¢˜):**
                                        *   å¯¹**ç”¨æˆ·è‡ªå·±æå‡ºçš„å…·ä½“äº‹ç‰©ï¼ˆæ–¹æ¡ˆã€ä½œå“ã€æƒ³æ³•ï¼‰** è¿›è¡Œè¯„ä¼°æˆ–å»ºè®® -> **H**ã€‚
                                        *   è¯¢é—®**ä¸€èˆ¬æ€§çš„ã€éç”¨æˆ·è‡ªèº«çš„äº‹ç‰©**çš„è¯„ä»·æˆ–çœ‹æ³•ï¼ˆå¦‚æŠ€æœ¯è¶‹åŠ¿ã€ç¤¾ä¼šç°è±¡ï¼‰ -> **J**ã€‚
                                    *   **A (è¯¾ç¨‹ç›¸å…³) vs å…¶ä»– (B, F, G, H, J):**
                                        *   é—®é¢˜ä¸­**æ˜ç¡®æåŠç‰¹å®šè¯¾ç¨‹ã€æ•™å¸ˆã€è¯¾ç¨‹ä½œä¸š/è€ƒè¯•** -> **A** (ä¼˜å…ˆçº§æœ€é«˜)ã€‚
                                        *   å³ä½¿é—®é¢˜æ¶‰åŠä¸“ä¸šçŸ¥è¯†(B)ã€æ–¹æ³•(F)ç­‰ï¼Œä½†**ç»‘å®šåˆ°äº†å…·ä½“è¯¾ç¨‹**ï¼Œä¹Ÿå½’ **A**ã€‚
                                    *   **K (æ–‡ä»¶ç›¸å…³) vs å…¶ä»–:**
                                        *   é—®é¢˜**æ˜ç¡®æåˆ°'ä¸Šä¼ 'ã€'æ–‡ä»¶'ã€'æ–‡æ¡£'ã€'é™„ä»¶'** ç­‰å…³é”®è¯ï¼Œå¹¶å›´ç»•è¯¥æ–‡ä»¶æé—® -> **K** (ä¼˜å…ˆçº§é«˜)ã€‚
                                        *   å³ä½¿é—®é¢˜å†…å®¹å¯èƒ½æ¶‰åŠå®šä¹‰(E)ã€åˆ†æ(H)ç­‰ï¼Œä½†**æ ¸å¿ƒæ˜¯é’ˆå¯¹ä¸Šä¼ çš„æ–‡ä»¶**ï¼Œä¹Ÿå½’ **K**ã€‚
                                    *   **å…œåº•åŸåˆ™:**
                                        *   ä¼˜å…ˆå°è¯•å½’å…¥ A, B, E, F, G, H, Kã€‚
                                        *   å±äºä¸“ä¸š/å­¦æœ¯èŒƒç•´ä½†ä¸ç¬¦åˆä»¥ä¸Šæ˜ç¡®çš„ -> **J**ã€‚
                                        *   å®Œå…¨ä¸ç›¸å…³æˆ–æ— æ³•ç†è§£ -> **D**ã€‚

                                    # è¾“å‡ºè¦æ±‚
                                    *   **ä»…è¾“å‡º**ä¸€ä¸ªå¯¹åº”çš„å¤§å†™å­—æ¯ä»£ç  (A, B, C, D, E, F, G, H, J, K)ã€‚
                                    *   **ä¸è¦**è¾“å‡ºä»»ä½•å…¶ä»–è§£é‡Šã€è¯´æ˜æˆ–æ–‡å­—ã€‚

                                    # ç¤ºä¾‹ (ç”¨æˆ·è¾“å…¥ -> æ­£ç¡®åˆ†ç±»)
                                    ç”¨æˆ·è¾“å…¥ï¼š "æè€å¸ˆçš„æ•°æ®ç»“æ„è¯¾ä¸‹å‘¨å®éªŒè¯¾è¦å¸¦ä»€ä¹ˆï¼Ÿ" -> A
                                    ç”¨æˆ·è¾“å…¥ï¼š "èƒ½è¯¦ç»†è¯´è¯´æ¢¯åº¦ä¸‹é™ç®—æ³•æ˜¯æ€ä¹ˆå·¥ä½œçš„å—ï¼Ÿ" -> B
                                    ç”¨æˆ·è¾“å…¥ï¼š "æ—©ä¸Šå¥½ï¼åƒäº†å—ï¼Ÿ" -> C
                                    ç”¨æˆ·è¾“å…¥ï¼š "asdfjkl;123!@#" -> D
                                    ç”¨æˆ·è¾“å…¥ï¼š "Transformer æ¨¡å‹ä¸­çš„ 'Self-Attention' æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" -> E
                                    ç”¨æˆ·è¾“å…¥ï¼š "æ€ä¹ˆç”¨LaTeXå†™æ•°å­¦å…¬å¼ï¼Ÿ" -> F
                                    ç”¨æˆ·è¾“å…¥ï¼š "å­¦æ•°æ®åˆ†ææ˜¯é€‰Pythonå¥½è¿˜æ˜¯Rå¥½ï¼Ÿ" -> G
                                    ç”¨æˆ·è¾“å…¥ï¼š "æˆ‘åˆšå†™çš„è¿™æ®µä»£ç æ•ˆç‡ä¸é«˜ï¼Œæœ‰ä»€ä¹ˆä¼˜åŒ–å»ºè®®ï¼Ÿ" -> H
                                    ç”¨æˆ·è¾“å…¥ï¼š "è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸç›®å‰æœ€å¤§çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ" -> J
                                    ç”¨æˆ·è¾“å…¥ï¼š "æˆ‘åˆšä¸Šä¼ çš„ç®€å†ï¼Œèƒ½å¸®æˆ‘çœ‹çœ‹æ ¼å¼å¯¹å—ï¼Ÿ" -> K
                                    ç”¨æˆ·è¾“å…¥ï¼š "å¸®æˆ‘æ€»ç»“ä¸€ä¸‹æˆ‘åˆšä¸Šä¼ çš„è®ºæ–‡PDFçš„æ ¸å¿ƒåˆ›æ–°ç‚¹ã€‚" -> K
                                    ç”¨æˆ·è¾“å…¥ï¼š "æœºå™¨å­¦ä¹ è¿™é—¨è¯¾çš„æœŸæœ«é¡¹ç›®æŠ¥å‘Šæœ‰æ¨¡æ¿å—ï¼Ÿ" -> A
                                    ç”¨æˆ·è¾“å…¥ï¼š "è´å¶æ–¯å®šç†å’Œé¢‘ç‡æ´¾ç»Ÿè®¡çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" -> B
                                    ç”¨æˆ·è¾“å…¥ï¼š "å¦‚ä½•ç”³è¯·å­¦æ ¡çš„ç§‘ç ”åŸºé‡‘ï¼Ÿ" -> F
                                    ç”¨æˆ·è¾“å…¥ï¼š "è¿™ä»½PPTçš„é…è‰²æ–¹æ¡ˆçœ‹èµ·æ¥ä¸“ä¸šå—ï¼Ÿ" -> H
                                    ç”¨æˆ·è¾“å…¥ï¼š "é‡å­è®¡ç®—å¯¹å¯†ç å­¦çš„å½±å“æœ‰å¤šå¤§ï¼Ÿ" -> J

                                    # ä»»åŠ¡
                                    ç°åœ¨ï¼Œè¯·å¯¹ä»¥ä¸‹ç”¨æˆ·è¾“å…¥è¿›è¡Œåˆ†ç±»ï¼š
                                    ç”¨æˆ·è¾“å…¥ï¼š"{user_input}"
                                    """
        self.VALID_INTENTS = ["A", "B", "C", "D", "E", "F", "G", "H", "J", "K"]

        # ----------------------- ä¼šè¯ç®¡ç†é…ç½® -----------------------
        # æœ€å¤§èŠå¤©å†å²è®°å½•æ•°
        self.MAX_CHAT_HISTORY = 20

        # ä¼šè¯åˆ†ç»„æ—¶é—´èŒƒå›´
        self.SESSION_GROUP_TODAY = "ä»Šå¤©"
        self.SESSION_GROUP_YESTERDAY = "æ˜¨å¤©"
        self.SESSION_GROUP_LAST_WEEK = "å‰7å¤©"
        self.SESSION_GROUP_OLDER = "æ›´æ—©"

    def _create_directories(self):
        """åˆ›å»ºé¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰ç›®å½•"""
        dirs_to_create = [
            self.LOG_DIR,
            self.DATA_DIR,
            self.UPLOADS_DIR,
            self.VECTOR_STORE_DIR,
            self.DB_DIR,
            self.STATIC_DIR,
        ]

        for directory in dirs_to_create:
            # æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
            if directory.exists():
                # ç›®å½•å·²å­˜åœ¨ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
                pass
            else:
                # ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
                directory.mkdir(parents=True, exist_ok=True)


class I18nConfig:
    """
    å›½é™…åŒ–é…ç½®ç±»
    æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
    æ‰€æœ‰ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„æ–‡æœ¬éƒ½é›†ä¸­åœ¨è¿™é‡Œç®¡ç†
    """
    def __init__(self, language='zh'):
        self.language = language
        self.translations = {
            'zh': {
                # ç™»å½•/æ³¨å†Œ - ä¸­æ–‡æ–‡æœ¬
                'welcome_back': 'ğŸ” æ¬¢è¿å›æ¥',
                'create_account': 'ğŸ“ åˆ›å»ºè´¦å·',
                'phone_placeholder': 'ğŸ“± è¯·è¾“å…¥11ä½æ‰‹æœºå·',
                'password_placeholder': 'ğŸ”’ è¯·è¾“å…¥å¯†ç ',
                'username_placeholder': 'ğŸ‘¤ è¯·è¾“å…¥ç”¨æˆ·å',
                'register_phone_placeholder': 'ğŸ“± è¯·è¾“å…¥11ä½æ‰‹æœºå·',
                'password_length_error': 'ğŸ”’ å¯†ç è‡³å°‘6ä½',
                'login': 'ğŸ”‘ ç™»å½•',
                'register': 'ğŸ“ ç«‹å³æ³¨å†Œ',
                'no_account': 'ğŸ“ è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ',
                'has_account': 'ğŸ”‘ å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•',
                'phone_format_error': 'ğŸ“± è¯·è¾“å…¥11ä½æ‰‹æœºå·',
                'phone_exists': 'ğŸ“± è¯¥æ‰‹æœºå·å·²æ³¨å†Œï¼Œå¯ç›´æ¥ç™»å½•',
                'phone_not_exists': 'ğŸ“± è¯¥æ‰‹æœºå·æœªæ³¨å†Œï¼Œè¯·å…ˆå»æ³¨å†Œ',
                'wrong_password': 'ğŸ”’ å¯†ç é”™è¯¯',
                'login_success': 'âœ… ç™»å½•æˆåŠŸï¼Œæ­£åœ¨è·³è½¬èŠå¤©é¡µ...',
                'register_success': 'âœ… æ³¨å†ŒæˆåŠŸï¼Œæ­£åœ¨è·³è½¬èŠå¤©é¡µ...',
                
                # èŠå¤©ç•Œé¢ - ä¸­æ–‡æ–‡æœ¬
                'welcome_user': 'ğŸ‘‹ æ¬¢è¿ï¼Œ{}ï¼ˆ{}ï¼‰',
                'new_chat': 'â• æ–°å»ºå¯¹è¯',
                'history_sessions': 'ğŸ“š å†å²ä¼šè¯',
                'upload_file': 'ğŸ“ ä¸Šä¼ ',
                'send_message': 'ğŸ“¤ å‘é€',
                'input_placeholder': 'ğŸ’¬ è¾“å…¥ä½ çš„é—®é¢˜...',
                'exit': 'ğŸšª é€€å‡º',
                
                # æ–‡ä»¶å¤„ç† - ä¸­æ–‡æ–‡æœ¬
                'uploading_file': 'ğŸ“¤ æ­£åœ¨ä¸Šä¼ : {}...',
                'processing_file': 'ğŸ”„ æ­£åœ¨å¤„ç†: {}...',
                'file_processed': 'âœ… å¤„ç†å®Œæˆ: {}',
                'file_failed': 'âŒ å¤„ç†å¤±è´¥: {}',
                'file_exception': 'ğŸ’¥ å¤„ç†å¼‚å¸¸: {}',
                'summary_success': 'âœ… æˆåŠŸå¤„ç† {} ä¸ªæ–‡ä»¶',
                'summary_failed': 'âŒ å¤±è´¥ {} ä¸ªæ–‡ä»¶',
                
                # ä¼šè¯åˆ†ç»„ - ä¸­æ–‡æ–‡æœ¬
                'today': 'ğŸ“… ä»Šå¤©',
                'yesterday': 'ğŸ“… æ˜¨å¤©',
                'last_week': 'ğŸ“… å‰7å¤©',
                'older': 'ğŸ“… æ›´æ—©',
                
                # ç³»ç»Ÿæ¶ˆæ¯ - ä¸­æ–‡æ–‡æœ¬
                'new_session_created': 'ğŸ‘‹ åŒå­¦æ‚¨å¥½ï¼å¾ˆé«˜å…´ä¸ºä½ æœåŠ¡ï¼',
                'error_occurred': 'âŒ æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„æ¶ˆæ¯æ—¶å‡ºç°é”™è¯¯ã€‚è¯·ç¨åå†è¯•ã€‚',
                'file_type_error': 'âŒ ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼: {}\næ”¯æŒçš„æ ¼å¼: {}',
                'file_save_error': 'âŒ æ–‡ä»¶ä¿å­˜å¤±è´¥: {}',
                
                # åç»­é—®é¢˜ - ä¸­æ–‡æ–‡æœ¬
                'predicting_questions': 'ğŸ”® é¢„æµ‹åç»­é—®é¢˜...',
            },
            'en': {
                # Login/Register - English text
                'welcome_back': 'ğŸ” Welcome Back',
                'create_account': 'ğŸ“ Create Account',
                'phone_placeholder': 'ğŸ“± Enter 11-digit phone number',
                'password_placeholder': 'ğŸ”’ Enter password',
                'username_placeholder': 'ğŸ‘¤ Enter username',
                'register_phone_placeholder': 'ğŸ“± Enter 11-digit phone number',
                'password_length_error': 'ğŸ”’ Password must be at least 6 characters',
                'login': 'ğŸ”‘ Login',
                'register': 'ğŸ“ Register Now',
                'no_account': 'ğŸ“ No account? Register now',
                'has_account': 'ğŸ”‘ Have account? Login',
                'phone_format_error': 'ğŸ“± Please enter valid 11-digit phone number',
                'phone_exists': 'ğŸ“± Phone number already registered, please login',
                'phone_not_exists': 'ğŸ“± Phone number not registered, please register first',
                'wrong_password': 'ğŸ”’ Incorrect password',
                'login_success': 'âœ… Login successful, redirecting...',
                'register_success': 'âœ… Registration successful, redirecting...',
                
                # Chat Interface - English text
                'welcome_user': 'ğŸ‘‹ Welcome, {} ({})',
                'new_chat': 'â• New Chat',
                'history_sessions': 'ğŸ“š Chat History',
                'upload_file': 'ğŸ“ Upload File',
                'send_message': 'ğŸ“¤ Send',
                'input_placeholder': 'ğŸ’¬ Type your question...',
                'exit': 'ğŸšª Logout',
                
                # File Processing - English text
                'uploading_file': 'ğŸ“¤ Uploading: {}...',
                'processing_file': 'ğŸ”„ Processing: {}...',
                'file_processed': 'âœ… Processed: {}',
                'file_failed': 'âŒ Failed: {}',
                'file_exception': 'ğŸ’¥ Exception: {}',
                'summary_success': 'âœ… Successfully processed {} files',
                'summary_failed': 'âŒ Failed {} files',
                
                # Session Groups - English text
                'today': 'ğŸ“… Today',
                'yesterday': 'ğŸ“… Yesterday',
                'last_week': 'ğŸ“… Last 7 Days',
                'older': 'ğŸ“… Earlier',
                
                # System Messages - English text
                'new_session_created': 'ğŸ‘‹ Hello! I am happy to assist you!',
                'error_occurred': 'âŒ Sorry, an error occurred processing your message. Please try again.',
                'file_type_error': 'âŒ Unsupported file format: {}\nSupported formats: {}',
                'file_save_error': 'âŒ File save failed: {}',
                
                # Next Questions - English text
                'predicting_questions': 'ğŸ”® Predicting next questions...',
            }
        }
    
    def get(self, key, *args):
        """è·å–ç¿»è¯‘æ–‡æœ¬ï¼Œæ”¯æŒæ ¼å¼åŒ–"""
        text = self.translations[self.language].get(key, key)
        if args:
            return text.format(*args)
        return text

# åˆ›å»ºå…¨å±€é…ç½®å®ä¾‹
config = Config()